# 宏

宏是一类特殊的低级别的模版。宏可以用来实现面向领域特定语言（DSL）宏不能改变Nim语言的语法，

## 声明

- 类似于过程调用
- 通过特定的宏语法来调用一个宏

```python
# 使用Nim语法树，我们需要一个在``macros``模块中定义的API：
import macros
 
macro debug(args: varargs[untyped]): untyped =
  # `args` 是 `NimNode` 值的集合，每个值都包含宏的参数的AST。
  # 宏总是必须返回一个 `NimNode` 。
  # 类型为 `nnkStmtList` 的节点适用于此用例。
  result = nnkStmtList.newTree()
  # 迭代传递给此宏的任何参数：
  for n in args:
    # 添加对写入表达式的语句列表的调用;
    # `toStrLit` 将AST转换为其字符串表示形式：
    result.add newCall("write", newIdentNode("stdout"), newLit(n.repr))
    # 添加对写入“：”的语句列表的调用
    result.add newCall("write", newIdentNode("stdout"), newLit(": "))
    # 添加对写入表达式值的语句列表的调用：
    result.add newCall("writeLine", newIdentNode("stdout"), n)
 
var
  a: array[0..10, int]
  x = "some string"
a[0] = 42
a[1] = 45
 
debug(a[0], a[1], x)
```

关键字**macros**

arg: 是NimNode值得集合，每个值都包含宏得参数得AST

宏总是必须**返回一**个**NimNode**，


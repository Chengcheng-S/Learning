## 间距和空白约定

- 一行代码量不应该超过80个字符
- 使用两个空格指定缩进

## 命名规则

- 当命名类型时，值，指针，以及引用类型，为各种类型使用一个规则名字是最常用的，并且为不同的类型添加一个"Obj", "Ref", "Ptr"后缀。

  ```
  type 
  	handle=int64   //will be used most often
  	HandleRef=ref Handle  //will be used less often
  ```

- `exception`和`error`类型应该有`Error`后缀

  ```
  type UnluckError= object of Exception
  ```

- 除非被标记`{.pure.}`，枚举类型成员应该有一个正确的前缀

  ```
  type aoth =enum
  	pcDir
  	pcLinkToDir
  	pcFile
  	pcLinkToFile
  ```

- Non-pure 枚举值 应该使用camelCase，而pure枚举值应该使用PascalCase

  ```
  type opth {.pure.}=enum
  	Dir
  	LinkToDir
  	File
  	LinkToFile
  ```

## 编码约定

- 只有当控制流特性需要的时候才能使用`return`语句，其他情况下都使用一个过程默认的`result`变量
- 返回一个`[]`或者“”  而不是`nil`,或者合适的时候抛出异常
- 在可能的情况下使用一个过程，仅在必要的情况下使用其他工具 ，宏，模板，迭代器以及转换器
- 当声明的变量在它们的作用域中不会改变，使用let语句(而不是var语句)。使用let语句确保变量保持不变，
- 对于新类型，建议使用`ref`和`object`变量类型版本，为了使两种变量都能使用，该类型都可以在堆和栈上分配

## 多行语句和表达式的约定

1. 任何超过一行的过程类型声明都应被格式化为一个常规类型的样式

   ```
   type
     EventCallback = proc (
       timeRecieved: Time
       errorCode: int
       event: Event
     )
   ```

   

2. 多行过程声明或者参数列表应该与`(`在相同的列继续，这个风格不同于过程类型声明，为了区分一个过程的标题和它的主体。如果一个过程的名字太长而不能使该风格便利，然后一种风格是多行程序调用

   ```
   proc lotsOfArguments(argOne: string, argTwo: int, argThree:float
                   argFour: proc(), argFive: bool): int
                     {.heyLookALongPragma.} =
   ```

3. 多行程序调用应每行有一个参数(如多行类型声明)或者与左开括号在相同的列继续(如多行过程声明)。建议如下，前一种风格用于有复杂参数结构的过程调用，后一种风格用于简单参数结构的过程调用。

   ```
   # Each argument on a new line, like type declarations
   # Best suited for 'complex' procedure calls.
   readDirectoryChangesW(
     directoryHandle.THandle,
     buffer.start,
     bufferSize.int32,
     watchSubdir.WinBool,
     filterFlags,
     cast[ptr dword](nil),
     cast[Overlapped](ol),
     cast[OverlappedCompletionRoutine](nil)
   )
   
   # Multiple arguments on new lines, aligned to the opening parenthesis
   # Best suited for 'simple' procedure calls
   startProcess(nimExecutable, currentDirectory, compilerArguments
              environment, processOptions)
   ```











